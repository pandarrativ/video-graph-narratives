{"ast":null,"code":"var _jsxFileName = \"/home/yhx/Projects/AnnVideo/Frontend/src/components/ImageCanvas.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ImageCanvas(props) {\n  _s();\n  const [boxes, setBoxes] = useState([]);\n  const [ctx, setCtx] = useState();\n  const canvasRef = useRef();\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    setCtx(canvas.getContext(\"2d\"));\n    ctx.fillStyle = \"green\";\n    ctx.fillRect(10, 10, 150, 100);\n    ctx.fillRect(20, 20, 180, 130);\n  }, []);\n\n  ///////////////////// for drawing one box ////////////////////////////\n  // calculate the x-y of the canvas\n  var canvasOffset = canvasRef.current.offset();\n  var offsetX = canvasOffset.left;\n  var offsetY = canvasOffset.top;\n  var scrollX = canvasRef.current.scrollLeft();\n  var scrollY = canvasRef.current.scrollTop();\n  //  flag: where user is dragging the box\n  const [isDown, setIsDown] = useState(false);\n  const [startX, setStartX] = useState();\n  const [startY, setStartY] = useState();\n  const [prevStartX, setPrevStartX] = useState(0);\n  const [prevStartY, setPrevStartY] = useState(0);\n  const [prevWidth, setPrevWidth] = useState(0);\n  const [prevHeight, setPrevHeight] = useState(0);\n  const handleMouseDown = e => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    // save the starting x/y of the rectangle\n    setStartX(parseInt(e.clientX - offsetX));\n    setStartY(parseInt(e.clientY - offsetY));\n\n    // set a flag indicating the drag has begun\n    setIsDown(true);\n  };\n  const handleMouseUp = e => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    // the drag is over, clear the dragging flag\n    isDown = false;\n    ctx.strokeRect(prevStartX, prevStartY, prevWidth, prevHeight);\n  };\n  const handleMouseMove = e => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    // if we're not dragging, just return\n    if (!isDown) {\n      return;\n    }\n\n    // get the current mouse position\n    let mouseX = parseInt(e.clientX - offsetX);\n    let mouseY = parseInt(e.clientY - offsetY);\n\n    // Put your mousemove stuff here\n\n    // calculate the rectangle width/height based\n    // on starting vs current mouse position\n    var width = mouseX - startX;\n    var height = mouseY - startY;\n\n    // clear the canvas\n    ctx.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\n\n    // draw a new rect from the start position \n    // to the current mouse position\n    ctx.strokeRect(startX, startY, width, height);\n    setPrevStartX(startX);\n    setPrevStartY(startY);\n    setPrevWidth(width);\n    prevHeight = height;\n  };\n  const handleMouseOut = () => {};\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    ref: canvasRef,\n    onMouseDown: handleMouseDown,\n    onMouseUp: handleMouseUp,\n    onMouseMove: handleMouseMove,\n    onMouseOut: handleMouseOut\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 9\n  }, this);\n}\n_s(ImageCanvas, \"xAb5sWUXgu7ngOoS7++oXnLeLro=\");\n_c = ImageCanvas;\nexport default ImageCanvas;\nvar _c;\n$RefreshReg$(_c, \"ImageCanvas\");","map":{"version":3,"names":["React","useRef","useEffect","useState","jsxDEV","_jsxDEV","ImageCanvas","props","_s","boxes","setBoxes","ctx","setCtx","canvasRef","canvas","current","getContext","fillStyle","fillRect","canvasOffset","offset","offsetX","left","offsetY","top","scrollX","scrollLeft","scrollY","scrollTop","isDown","setIsDown","startX","setStartX","startY","setStartY","prevStartX","setPrevStartX","prevStartY","setPrevStartY","prevWidth","setPrevWidth","prevHeight","setPrevHeight","handleMouseDown","e","preventDefault","stopPropagation","parseInt","clientX","clientY","handleMouseUp","strokeRect","handleMouseMove","mouseX","mouseY","width","height","clearRect","handleMouseOut","ref","onMouseDown","onMouseUp","onMouseMove","onMouseOut","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/yhx/Projects/AnnVideo/Frontend/src/components/ImageCanvas.js"],"sourcesContent":["import React,{useRef, useEffect, useState} from 'react';\n\nfunction ImageCanvas(props) {\n    const [boxes, setBoxes] = useState([]);\n    const [ctx, setCtx] = useState();\n    const canvasRef = useRef();\n    useEffect(() => {\n        const canvas = canvasRef.current;\n        setCtx(canvas.getContext(\"2d\"));\n\n        ctx.fillStyle = \"green\";\n        ctx.fillRect(10, 10, 150, 100);\n        ctx.fillRect(20, 20, 180, 130);\n    },[])\n\n\n\n    ///////////////////// for drawing one box ////////////////////////////\n    // calculate the x-y of the canvas\n    var canvasOffset = canvasRef.current.offset();\n    var offsetX = canvasOffset.left;\n    var offsetY = canvasOffset.top;\n    var scrollX = canvasRef.current.scrollLeft();\n    var scrollY = canvasRef.current.scrollTop();\n    //  flag: where user is dragging the box\n    const [isDown, setIsDown] = useState(false);\n    const [startX, setStartX] = useState();\n    const [startY, setStartY] = useState();\n\n    const [prevStartX, setPrevStartX] = useState(0);\n    const [prevStartY, setPrevStartY] = useState(0);\n\n    const [prevWidth, setPrevWidth] = useState(0);\n    const [prevHeight, setPrevHeight] = useState(0);    \n\n\n    const handleMouseDown = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n    \n        // save the starting x/y of the rectangle\n        setStartX( parseInt(e.clientX - offsetX) );\n        setStartY(parseInt(e.clientY - offsetY));\n    \n        // set a flag indicating the drag has begun\n        setIsDown(true);\n    };\n\n    const handleMouseUp = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n    \n        // the drag is over, clear the dragging flag\n        isDown = false;\n        ctx.strokeRect(prevStartX, prevStartY, prevWidth, prevHeight);\n    }\n\n    const handleMouseMove = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n    \n        // if we're not dragging, just return\n        if (!isDown) {\n            return;\n        }\n    \n        // get the current mouse position\n        let mouseX = parseInt(e.clientX - offsetX);\n        let mouseY = parseInt(e.clientY - offsetY);\n    \n        // Put your mousemove stuff here\n    \n        \n    \n        // calculate the rectangle width/height based\n        // on starting vs current mouse position\n        var width = mouseX - startX;\n        var height = mouseY - startY;\n    \n            // clear the canvas\n        ctx.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\n    \n        // draw a new rect from the start position \n        // to the current mouse position\n        ctx.strokeRect(startX, startY, width, height);\n        \n            setPrevStartX(startX);\n            setPrevStartY(startY);\n    \n            setPrevWidth(width);\n            prevHeight = height;\n    }\n\n\n    const handleMouseOut = () => {\n\n    }\n\n\n    return (\n        <canvas \n            ref={canvasRef} \n            onMouseDown={handleMouseDown} \n            onMouseUp={handleMouseUp}\n            onMouseMove={handleMouseMove}\n            onMouseOut={handleMouseOut}\n        ></canvas>\n    );\n}\n\nexport default ImageCanvas;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}