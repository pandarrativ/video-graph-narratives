{"ast":null,"code":"var _jsxFileName = \"/home/yhx/Projects/AnnVideo/Frontend/src/components/ReactVideoPlayer.js\",\n  _s = $RefreshSig$();\nimport ReactPlayer from \"react-player\";\nimport { Container } from \"@material-ui/core\";\nimport Control from \"./Control\";\nimport { useState, useRef } from \"react\";\nimport { formatTime } from \"../utils/utils\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet count = 0;\nfunction ReactVideoPlayer() {\n  _s();\n  const videoPlayerRef = useRef(null);\n  const controlRef = useRef(null);\n  const [videoState, setVideoState] = useState({\n    playing: true,\n    muted: false,\n    volume: 0.5,\n    playbackRate: 1.0,\n    played: 0,\n    seeking: false,\n    buffer: true\n  });\n\n  //Destructuring the properties from the videoState\n  const {\n    playing,\n    muted,\n    volume,\n    playbackRate,\n    played,\n    seeking,\n    buffer\n  } = videoState;\n  const currentTime = videoPlayerRef.current ? videoPlayerRef.current.getCurrentTime() : \"00:00\";\n  const duration = videoPlayerRef.current ? videoPlayerRef.current.getDuration() : \"00:00\";\n  const formatCurrentTime = formatTime(currentTime);\n  const formatDuration = formatTime(duration);\n  const playPauseHandler = () => {\n    //plays and pause the video (toggling)\n    setVideoState({\n      ...videoState,\n      playing: !videoState.playing\n    });\n  };\n  const rewindHandler = () => {\n    //Rewinds the video player reducing 5\n    videoPlayerRef.current.seekTo(videoPlayerRef.current.getCurrentTime() - 5);\n  };\n  const handleFastFoward = () => {\n    //FastFowards the video player by adding 10\n    videoPlayerRef.current.seekTo(videoPlayerRef.current.getCurrentTime() + 10);\n  };\n\n  //console.log(\"========\", (controlRef.current.style.visibility = \"false\"));\n  const progressHandler = state => {\n    if (count > 3) {\n      console.log(\"close\");\n      controlRef.current.style.visibility = \"hidden\"; // toggling player control container\n    } else if (controlRef.current.style.visibility === \"visible\") {\n      count += 1;\n    }\n    if (!seeking) {\n      setVideoState({\n        ...videoState,\n        ...state\n      });\n    }\n  };\n  const seekHandler = (e, value) => {\n    setVideoState({\n      ...videoState,\n      played: parseFloat(value / 100)\n    });\n    videoPlayerRef.current.seekTo(parseFloat(value / 100));\n  };\n  const seekMouseUpHandler = (e, value) => {\n    console.log(value);\n    setVideoState({\n      ...videoState,\n      seeking: false\n    });\n    videoPlayerRef.current.seekTo(value / 100);\n  };\n  const volumeChangeHandler = (e, value) => {\n    const newVolume = parseFloat(value) / 100;\n    setVideoState({\n      ...videoState,\n      volume: newVolume,\n      muted: Number(newVolume) === 0 ? true : false // volume === 0 then muted\n    });\n  };\n\n  const volumeSeekUpHandler = (e, value) => {\n    const newVolume = parseFloat(value) / 100;\n    setVideoState({\n      ...videoState,\n      volume: newVolume,\n      muted: newVolume === 0 ? true : false\n    });\n  };\n  const muteHandler = () => {\n    //Mutes the video player\n    setVideoState({\n      ...videoState,\n      muted: !videoState.muted\n    });\n  };\n  const onSeekMouseDownHandler = e => {\n    setVideoState({\n      ...videoState,\n      seeking: true\n    });\n  };\n  const mouseMoveHandler = () => {\n    controlRef.current.style.visibility = \"visible\";\n    count = 0;\n  };\n  const bufferStartHandler = () => {\n    console.log(\"Bufering.......\");\n    setVideoState({\n      ...videoState,\n      buffer: true\n    });\n  };\n  const bufferEndHandler = () => {\n    console.log(\"buffering stoped ,,,,,,play\");\n    setVideoState({\n      ...videoState,\n      buffer: false\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"video_container\",\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"md\",\n      justify: \"center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"player__wrapper\",\n        onMouseMove: mouseMoveHandler,\n        children: [/*#__PURE__*/_jsxDEV(ReactPlayer, {\n          ref: videoPlayerRef,\n          className: \"player\",\n          url: \"https://bucket-viewer.s3.amazonaws.com/viewer1664370329252.mp4\",\n          width: \"100%\",\n          height: \"100%\",\n          playing: playing,\n          volume: volume,\n          muted: muted,\n          onProgress: progressHandler,\n          onBuffer: bufferStartHandler,\n          onBufferEnd: bufferEndHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this), buffer && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 22\n        }, this), /*#__PURE__*/_jsxDEV(Control, {\n          controlRef: controlRef,\n          onPlayPause: playPauseHandler,\n          playing: playing,\n          onRewind: rewindHandler,\n          onForward: handleFastFoward,\n          played: played,\n          onSeek: seekHandler,\n          onSeekMouseUp: seekMouseUpHandler,\n          volume: volume,\n          onVolumeChangeHandler: volumeChangeHandler,\n          onVolumeSeekUp: volumeSeekUpHandler,\n          mute: muted,\n          onMute: muteHandler,\n          playRate: playbackRate,\n          duration: formatDuration,\n          currentTime: formatCurrentTime,\n          onMouseSeekDown: onSeekMouseDownHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 5\n  }, this);\n}\n_s(ReactVideoPlayer, \"LpQjP94Cj5joG57S4kprOYoxtwo=\");\n_c = ReactVideoPlayer;\nexport default ReactVideoPlayer;\nvar _c;\n$RefreshReg$(_c, \"ReactVideoPlayer\");","map":{"version":3,"names":["ReactPlayer","Container","Control","useState","useRef","formatTime","jsxDEV","_jsxDEV","count","ReactVideoPlayer","_s","videoPlayerRef","controlRef","videoState","setVideoState","playing","muted","volume","playbackRate","played","seeking","buffer","currentTime","current","getCurrentTime","duration","getDuration","formatCurrentTime","formatDuration","playPauseHandler","rewindHandler","seekTo","handleFastFoward","progressHandler","state","console","log","style","visibility","seekHandler","e","value","parseFloat","seekMouseUpHandler","volumeChangeHandler","newVolume","Number","volumeSeekUpHandler","muteHandler","onSeekMouseDownHandler","mouseMoveHandler","bufferStartHandler","bufferEndHandler","className","children","maxWidth","justify","onMouseMove","ref","url","width","height","onProgress","onBuffer","onBufferEnd","fileName","_jsxFileName","lineNumber","columnNumber","onPlayPause","onRewind","onForward","onSeek","onSeekMouseUp","onVolumeChangeHandler","onVolumeSeekUp","mute","onMute","playRate","onMouseSeekDown","_c","$RefreshReg$"],"sources":["/home/yhx/Projects/AnnVideo/Frontend/src/components/ReactVideoPlayer.js"],"sourcesContent":["import ReactPlayer from \"react-player\";\nimport { Container } from \"@material-ui/core\";\nimport Control from \"./Control\";\nimport { useState, useRef } from \"react\";\nimport { formatTime } from \"../utils/utils\";\n\nlet count = 0;\nfunction ReactVideoPlayer() {\n  const videoPlayerRef = useRef(null);\n  const controlRef = useRef(null);\n\n  const [videoState, setVideoState] = useState({\n    playing: true,\n    muted: false,\n    volume: 0.5,\n    playbackRate: 1.0,\n    played: 0,\n    seeking: false,\n    buffer: true,\n  });\n\n  //Destructuring the properties from the videoState\n  const { playing, muted, volume, playbackRate, played, seeking, buffer } =\n    videoState;\n\n  const currentTime = videoPlayerRef.current\n    ? videoPlayerRef.current.getCurrentTime()\n    : \"00:00\";\n  const duration = videoPlayerRef.current\n    ? videoPlayerRef.current.getDuration()\n    : \"00:00\";\n\n  const formatCurrentTime = formatTime(currentTime);\n  const formatDuration = formatTime(duration);\n\n  const playPauseHandler = () => {\n    //plays and pause the video (toggling)\n    setVideoState({ ...videoState, playing: !videoState.playing });\n  };\n\n  const rewindHandler = () => {\n    //Rewinds the video player reducing 5\n    videoPlayerRef.current.seekTo(videoPlayerRef.current.getCurrentTime() - 5);\n  };\n\n  const handleFastFoward = () => {\n    //FastFowards the video player by adding 10\n    videoPlayerRef.current.seekTo(videoPlayerRef.current.getCurrentTime() + 10);\n  };\n\n  //console.log(\"========\", (controlRef.current.style.visibility = \"false\"));\n  const progressHandler = (state) => {\n    if (count > 3) {\n      console.log(\"close\");\n      controlRef.current.style.visibility = \"hidden\"; // toggling player control container\n    } else if (controlRef.current.style.visibility === \"visible\") {\n      count += 1;\n    }\n\n    if (!seeking) {\n      setVideoState({ ...videoState, ...state });\n    }\n  };\n\n  const seekHandler = (e, value) => {\n    setVideoState({ ...videoState, played: parseFloat(value / 100) });\n    videoPlayerRef.current.seekTo(parseFloat(value / 100));\n  };\n\n  const seekMouseUpHandler = (e, value) => {\n    console.log(value);\n\n    setVideoState({ ...videoState, seeking: false });\n    videoPlayerRef.current.seekTo(value / 100);\n  };\n\n  const volumeChangeHandler = (e, value) => {\n    const newVolume = parseFloat(value) / 100;\n\n    setVideoState({\n      ...videoState,\n      volume: newVolume,\n      muted: Number(newVolume) === 0 ? true : false, // volume === 0 then muted\n    });\n  };\n\n  const volumeSeekUpHandler = (e, value) => {\n    const newVolume = parseFloat(value) / 100;\n\n    setVideoState({\n      ...videoState,\n      volume: newVolume,\n      muted: newVolume === 0 ? true : false,\n    });\n  };\n\n  const muteHandler = () => {\n    //Mutes the video player\n    setVideoState({ ...videoState, muted: !videoState.muted });\n  };\n\n  const onSeekMouseDownHandler = (e) => {\n    setVideoState({ ...videoState, seeking: true });\n  };\n\n  const mouseMoveHandler = () => {\n    controlRef.current.style.visibility = \"visible\";\n    count = 0;\n  };\n\n  const bufferStartHandler = () => {\n    console.log(\"Bufering.......\");\n    setVideoState({ ...videoState, buffer: true });\n  };\n\n  const bufferEndHandler = () => {\n    console.log(\"buffering stoped ,,,,,,play\");\n    setVideoState({ ...videoState, buffer: false });\n  };\n\n  return (\n    <div className=\"video_container\">\n      <Container maxWidth=\"md\" justify=\"center\">\n        <div className=\"player__wrapper\" onMouseMove={mouseMoveHandler}>\n          <ReactPlayer\n            ref={videoPlayerRef}\n            className=\"player\"\n            url=\"https://bucket-viewer.s3.amazonaws.com/viewer1664370329252.mp4\"\n            width=\"100%\"\n            height=\"100%\"\n            playing={playing}\n            volume={volume}\n            muted={muted}\n            onProgress={progressHandler}\n            onBuffer={bufferStartHandler}\n            onBufferEnd={bufferEndHandler}\n          />\n\n          {buffer && <p>Loading</p>}\n\n          <Control\n            controlRef={controlRef}\n            onPlayPause={playPauseHandler}\n            playing={playing}\n            onRewind={rewindHandler}\n            onForward={handleFastFoward}\n            played={played}\n            onSeek={seekHandler}\n            onSeekMouseUp={seekMouseUpHandler}\n            volume={volume}\n            onVolumeChangeHandler={volumeChangeHandler}\n            onVolumeSeekUp={volumeSeekUpHandler}\n            mute={muted}\n            onMute={muteHandler}\n            playRate={playbackRate}\n            duration={formatDuration}\n            currentTime={formatCurrentTime}\n            onMouseSeekDown={onSeekMouseDownHandler}\n          />\n        </div>\n      </Container>\n    </div>\n  );\n}\n\nexport default ReactVideoPlayer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}